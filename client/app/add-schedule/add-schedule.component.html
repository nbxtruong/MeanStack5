<app-toast [message]="toast.message"></app-toast>

<div class="schedule-header">
  <div class="app-container">
    <h1 class="schedule-name">
      <i class="far fa-calendar-alt"></i>Create Schedule
    </h1>
  </div>
</div>
<div class="app-content col-12 px-4 pt-3 pb-5 h-100">
  <div class="main-content col-12 mx-0 px-0">
    <div class="col-12 mx-0 px-2">
      <div class="col-12 col-md-6">
        <label class="mx-0 px-0">Name</label>
        <input class="col-12 col-lg-6 mx-0 mb-1 px-1 form-control" placeholder="Schedule Name" type="text" (ngModelChange)="this.scheduleService.validateSchedule()"
          [(ngModel)]="scheduleService.schedule.name" />
      </div>
      <div style="background-color: #fafafa;" class="col-12 col-md-6">
        <label>
          Type of Schedule
        </label>
        <select class="col-12 col-lg-6 mx-0 mb-1 px-0 form-control" [disabled]="scheduleService.isEditting" [(ngModel)]="scheduleType"
          name="scheduleSelectBox">
          <option value="{{FIXED_DAILY}}">{{FIXED_DAILY}}</option>
          <option value="{{FIXED_INTERVAL}}">{{FIXED_INTERVAL}}</option>
          <option value="{{FLEXIBLE_DAILY}}">{{FLEXIBLE_DAILY}}</option>
        </select>
      </div>
    </div>
    <div class="col-12 pt-5">
      <div class="row col-12 mx-0">
        <div class="col-2 col-md-1 mx-0 px-0">
          <div class="vertical-bar-head">
            <div class="no-bg">
              <div class="font-size-18 bold">When</div>
            </div>
          </div>
          <div class="vertical-bar-body hidden-sm-down">
            <div class="no-bg">
              <div class="vertical-bar-body mx-1"></div>
            </div>
          </div>

          <div class="mx-3 px-0 py-0 my-0 hidden-md-up">
            <div class="vertical-bar-head line-width ">
              <div class="no-bg">
                <div class="when-eclipse-1 rounded-circle mt-2"></div>
              </div>
            </div>
            <div class="vertical-bar-body-2 line-width">
              <div class="no-bg">
                <div class="my-0 py-0">
                  <div class="line-gap-2 dashed-line py-0 my-0"></div>
                </div>
              </div>
            </div>
            <div class="vertical-bar-foot-2 line-width">
              <div class="no-bg">
                <div class="when-eclipse-2 rounded-circle my-0 py-0"></div>
              </div>
            </div>
          </div>
          <div class="vertical-bar-foot">
            <div class="no-bg">
              <div class="font-size-18 bold">Then</div>
            </div>
          </div>
        </div>
        <div class="mx-1 px-1 hidden-sm-down">
          <div class="vertical-bar-head line-width ">
            <div class="no-bg">
              <div class="when-eclipse-1 rounded-circle mt-2"></div>
            </div>
          </div>
          <div class="vertical-bar-body line-width">
            <div class="no-bg">
              <div class="my-0 py-0">
                <div class="line-gap dashed-line py-0 my-0"></div>
              </div>
            </div>
          </div>
          <div class="vertical-bar-foot line-width">
            <div class="no-bg">
              <div class="when-eclipse-2 rounded-circle my-0 py-0"></div>
            </div>
          </div>
        </div>
        <div class="col-10 col-md-10">
          <fixed-daily [schedule]="scheduleService.schedule" [sprinklers]="sprinklers" *ngIf="scheduleType===FIXED_DAILY">
          </fixed-daily>
          <fixed-interval [schedule]="scheduleService.schedule" [sprinklers]="sprinklers" *ngIf="scheduleType===FIXED_INTERVAL">
          </fixed-interval>
          <flexible-daily [schedule]="scheduleService.schedule" [sprinklers]="sprinklers" [devices]="devices" *ngIf="scheduleType===FLEXIBLE_DAILY">
          </flexible-daily>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="col-12 row px-4 mx-0 my-1 hidden-xs-down">
  <div class="no-bg font-size-18 row px-1 mx-2" style="background-color:white!important;">
    <div class="mx-2 my-2" *ngIf="!scheduleService.isEditting">
      <button (click)="createSchedule()" *ngIf="this.scheduleService.isValidSchedule" class="create-schedule-btn float-right px-3">Add Schedule</button>
      <button *ngIf="!this.scheduleService.isValidSchedule" disabled class="create-schedule-btn float-right px-3">Add Schedule</button>
    </div>
    <div class="mx-2 my-2" *ngIf="scheduleService.isEditting">
      <button (click)="updateSchedule()" *ngIf="this.scheduleService.isValidSchedule" class="create-schedule-btn float-right px-3">Update Schedule</button>
      <button *ngIf="!this.scheduleService.isValidSchedule" disabled class="create-schedule-btn float-right px-3">Update Schedule</button>
    </div>
    <div class="mx-2 my-2">
      <button (click)="clearAll()" class="cancel-schedule-btn float-left px-3">Cancel</button>
    </div>
  </div>
</div>

<div class="col-12 row px-4 mx-0 my-1 hidden-sm-up">
  <div class="no-bg font-size-18 row px-1 mx-2" style="background-color:white!important;">
    <div class="mx-2 my-2" *ngIf="!scheduleService.isEditting">
      <button (click)="createSchedule()" *ngIf="this.scheduleService.isValidSchedule" class="create-schedule-btn float-right px-3">+</button>
      <button *ngIf="!this.scheduleService.isValidSchedule" disabled class="create-schedule-btn float-right px-3">+</button>
    </div>
    <div class="mx-2 my-2" *ngIf="scheduleService.isEditting">
      <button (click)="updateSchedule()" *ngIf="this.scheduleService.isValidSchedule" class="create-schedule-btn float-right px-3">Update</button>
      <button *ngIf="!this.scheduleService.isValidSchedule" disabled class="create-schedule-btn float-right px-3">Update</button>
    </div>
    <div class="mx-2 my-2" *ngIf="scheduleService.isEditting">
      <button (click)="clearAll()" class="cancel-schedule-btn float-left px-3">x</button>
    </div>
  </div>
</div>
